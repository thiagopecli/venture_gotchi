{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dashboard de partidas do Venture Gotchi">
    <meta name="keywords" content="partidas, simulaÃ§Ã£o, startup, dashboard">
    <title>Dashboard - Venture Gotchi</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <header class="dashboard-header">
        <nav>
            <a href="{% url 'dashboard' %}" class="nav-link nav-link-primary">Dashboard</a> 
            |
            <a href="{% url 'perfil' %}" class="nav-link">Perfil</a>
            |
            <a href="{% url 'historico' %}" class="nav-link">HistÃ³rico</a>
            |
            <a href="{% url 'conquistas' %}" class="nav-link">Conquistas</a>
            |
                <a href="{% url 'ranking' %}" class="nav-link">ğŸ† Ranking</a>
                |
            {% if user.is_authenticated %}
                <span class="user-name">OlÃ¡, {{ user.username }}!</span>
                |
                <form method="post" action="{% url 'logout' %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="nav-link logout-btn">Sair</button>
                </form>

            {% else %}
                <a href="{% url 'login' %}">Entrar (Login)</a>
            {% endif %}
        </nav>
    </header>

    <main class="container">
        
        <div class="welcome-box">
            <h2>Bem-vinda, {{ user.username }} ğŸ‘‹</h2>
            <p>
                {% if user.is_estudante %}
                    Gerencie sua startup, tome decisÃµes estratÃ©gicas e acompanhe o crescimento.
                {% elif user.is_educador %}
                    Acesse relatÃ³rios agregados e acompanhe o desempenho dos estudantes.
                {% else %}
                    Bem-vindo ao Venture Gotchi!
                {% endif %}
            </p>
            <p><strong>Perfil:</strong> {{ user.get_categoria_display }}</p>
        </div>
        <h1>
            {% if user.is_estudante %}
                Minhas SimulaÃ§Ãµes
            {% elif user.is_educador %}
                Painel do Educador
            {% else %}
                Dashboard
            {% endif %}
        </h1>

        <div class="game-line"></div>
        <p class="game-hint">
            {% if user.is_estudante %}
                Cada decisÃ£o impacta o futuro da sua empresa.
            {% elif user.is_educador %}
                Acompanhe dados agregados e o progresso dos estudantes.
            {% endif %}
        </p>

        {% if user.pode_salvar_carregar_partida %}
        <div class="cta-box">
            <a href="{% url 'nova_partida' %}" class="btn btn-primary">
                ğŸš€ Iniciar Nova Startup
                <span class="btn-subtext">Comece uma nova simulaÃ§Ã£o do zero</span>
            </a>
        </div>
        {% endif %}
        
        {% if user.is_estudante %}
        <div class="partidas-container">

            <h2 class="section-title">Partidas Salvas</h2>

            {% if partidas %}
                {% if partidas|length == 1 %}
                <p class="hint-text">
                    ğŸ¯ VocÃª tem uma startup em andamento. Continue tomando decisÃµes para crescer sua empresa.
                </p>
                {% endif %}

                <ul class="list-unstyled">
                    {% for partida in partidas %}
                    <li class="card partida-card">
                    
                        <div class="partida-info">
                            <strong class="partida-nome">{{ partida.nome_empresa }}</strong>
                            <span class="text-muted">
                                (InÃ­cio: {{ partida.data_inicio|date:"d/m/Y" }})
                            </span>
                        </div>

                    <div class="partida-actions"></div>
                        <a href="{% url 'carregar_jogo' partida.id %}" class="btn btn-primary">
                            Continuar Jogo
                        </a>
                        <a href="{% url 'metricas' partida.id %}" class="btn btn-secondary">
                            Ver MÃ©tricas
                        </a>
                    </div>

                </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="alert alert-warning">
                VocÃª ainda nÃ£o possui nenhuma partida salva.
            </p>
        {% endif %}

        </div>
        {% elif user.is_educador %}
        <div class="partidas-container">
            <h2 class="section-title">ğŸ“Š Funcionalidades de Educador</h2>
            <div class="card" style="display: block; padding: 20px;">
                <p>Como Educador de NegÃ³cios, vocÃª tem acesso a:</p>
                <ul style="list-style: none; padding: 0;">
                    <li>âœ… <strong>RelatÃ³rios Agregados:</strong> Visualize estatÃ­sticas gerais dos estudantes</li>
                    <li>âœ… <strong>Rankings:</strong> Acompanhe o desempenho comparativo</li>
                    <li>âœ… <strong>VisualizaÃ§Ã£o de Conquistas:</strong> Veja as conquistas desbloqueadas</li>
                    <li>âŒ <strong>CriaÃ§Ã£o de Partidas:</strong> Modo somente leitura</li>
                </ul>
                <div style="margin-top: 20px;">
                    <a href="#" class="btn btn-primary" style="margin-right: 10px;">ğŸ“ˆ Ver RelatÃ³rios (Em Breve)</a>
                    <a href="#" class="btn btn-secondary">ğŸ† Ver Ranking (Em Breve)</a>
                </div>
            </div>
        </div>
        {% else %}
        <div class="partidas-container">
            <div class="card" style="display: block; padding: 20px;">
                <p>Bem-vindo! Entre em contato com o administrador para mais informaÃ§Ãµes sobre seu perfil.</p>
            </div>
        </div>
        {% endif %}
    </main>

    <footer>
        <p class="text-center">Â© 2025 - Venture Gotchi</p>
    </footer>
</body>
</html>