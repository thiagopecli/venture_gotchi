{% extends 'base.html' %}

{% block title %}Ranking - Venture Gotchi{% endblock %}

{% block content %}
<h2>ğŸ† {{ titulo }}</h2>

<div class="card" style="display: block; margin-bottom: 20px; padding: 15px;">
    <h3>Filtrar por:</h3>
    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
        <a href="{% url 'ranking' %}?criterio=valuation" class="btn {% if criterio == 'valuation' %}btn-primary{% else %}btn-secondary{% endif %}">
            ğŸ’ Valuation
        </a>
        <a href="{% url 'ranking' %}?criterio=saldo" class="btn {% if criterio == 'saldo' %}btn-primary{% else %}btn-secondary{% endif %}">
            ğŸ’° Saldo em Caixa
        </a>
        <a href="{% url 'ranking' %}?criterio=turno" class="btn {% if criterio == 'turno' %}btn-primary{% else %}btn-secondary{% endif %}">
            â±ï¸ Turno AlcanÃ§ado
        </a>
        <a href="{% url 'ranking' %}?criterio=conquistas" class="btn {% if criterio == 'conquistas' %}btn-primary{% else %}btn-secondary{% endif %}">
            ğŸ… Conquistas
        </a>
    </div>
</div>

{% if startups %}
    <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse; background: var(--bg-secondary); border: 1px solid var(--border-color);">
            <thead>
                <tr style="background: rgba(33, 118, 244, 0.2); border-bottom: 2px solid var(--accent-blue);">
                    <th style="padding: 12px; text-align: left;">#</th>
                    <th style="padding: 12px; text-align: left;">ğŸ¢ Empresa</th>
                    <th style="padding: 12px; text-align: left;">ğŸ‘¤ Fundador</th>
                    <th style="padding: 12px; text-align: right;">ğŸ’ Valuation</th>
                    <th style="padding: 12px; text-align: right;">ğŸ’° Saldo</th>
                    <th style="padding: 12px; text-align: center;">â±ï¸ Turno</th>
                    <th style="padding: 12px; text-align: center;">ğŸ‘¥ FuncionÃ¡rios</th>
                    <th style="padding: 12px; text-align: center;">ğŸ… Conquistas</th>
                </tr>
            </thead>
            <tbody>
                {% for startup in startups %}
                <tr style="border-bottom: 1px solid var(--border-color); {% if startup.partida.usuario == user %}background: rgba(248, 201, 35, 0.1);{% endif %}">
                    <td style="padding: 12px; font-weight: bold; color: var(--accent-yellow);">
                        {{ forloop.counter }}
                        {% if forloop.counter == 1 %}ğŸ¥‡{% elif forloop.counter == 2 %}ğŸ¥ˆ{% elif forloop.counter == 3 %}ğŸ¥‰{% endif %}
                    </td>
                    <td style="padding: 12px;">
                        <strong>{{ startup.nome }}</strong>
                        {% if startup.partida.usuario == user %}<span style="color: var(--accent-yellow);"> (VocÃª)</span>{% endif %}
                    </td>
                    <td style="padding: 12px;">{{ startup.partida.usuario.username }}</td>
                    <td style="padding: 12px; text-align: right; font-weight: bold; color: var(--accent-blue);">
                        R$ {{ startup.valuation|floatformat:2 }}
                    </td>
                    <td style="padding: 12px; text-align: right; color: #4CAF50;">
                        R$ {{ startup.saldo_caixa|floatformat:2 }}
                    </td>
                    <td style="padding: 12px; text-align: center;">{{ startup.turno_atual }}</td>
                    <td style="padding: 12px; text-align: center;">{{ startup.funcionarios }}</td>
                    <td style="padding: 12px; text-align: center;">{{ startup.total_conquistas }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <p style="margin-top: 15px; color: var(--text-light); font-size: 0.9em;">
        ğŸ“Š Exibindo top {{ startups|length }} startups ativas no momento.
        {% if user.is_educador %}
        <br>ğŸ’¡ <em>Modo Educador: VocÃª pode visualizar todas as startups do sistema.</em>
        {% endif %}
    </p>
{% else %}
    <div class="card" style="display: block; padding: 20px;">
        <p>Ainda nÃ£o hÃ¡ startups ativas no ranking.</p>
    </div>
{% endif %}

<a href="{% url 'dashboard' %}" class="btn btn-primary" style="margin-top: 20px;">Voltar ao Dashboard</a>

{% endblock %}
